<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: dragAndDrop.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: dragAndDrop.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module dragAndDrop
 * @description Make it possible to drag and drop lists and list items. The functions in this model essentially allow to swap DOM elements.
 * @author xylnx
 * @see &lt;a href="https://github.com/xylnx">https://github.com/xylnx&lt;/a>
 */
const dragAndDrop = (function () {
  /**
   * Runs when a user starts dragging an item (ondragstart).
   * It sets the dataTransfer property to the id of the dragged element.
   * @param {Object} e -- event object
   * @memberof module:dragAndDrop
   */
  function drag(e) {
    e.dataTransfer.setData('text', e.target.id);
  }

  /** Runs when a user places a draggable item over a drop zone: per default browsers do not allow drag and drop => prevent the default.
   * @param {Object} e -- event object
   * @memberof module:dragAndDrop
   */
  function allowDrop(e) {
    e.preventDefault();
  }

  /** Runs when a user drops the dragged item onto a possible drop zone.
   * @param {Object} e -- event object
   * @memberof module:dragAndDrop
   */
  function drop(e) {
    e.preventDefault();

    // The index of the dragged element in the nodeList of all elements (will be set below)
    let dragindex = 0;

    // Create a clone of the element onto which the dragged element was dropped
    const clone = e.target.cloneNode(true);
    // Get ID of the dragged element => this ID was stored in drag() using `setData()`
    const data = e.dataTransfer.getData('text');
    const curEl = document.getElementById(data);

    const cloneDomPos = e.target.dataset.domPos;
    const curDomPos = curEl.dataset.domPos;

    if (clone.id !== data) {
      // Get all list/list item elements
      let nodeList = document.querySelector('.grid-container').childNodes;
      for (let i = 0; i &lt; nodeList.length; i++) {
        if (nodeList[i].id === data) {
          dragindex = i;
        }
      }
      // Replace the node in the drop zone with the dragged node
      document
        .querySelector('.grid-container')
        .replaceChild(document.getElementById(data), e.target);

      // Insert the clone of the node in the drop zone at the previous index (dragindex) of the dragged node
      document
        .querySelector('.grid-container')
        .insertBefore(
          clone,
          document.querySelector('.grid-container').childNodes[dragindex]
        );

      // Model: get both elements and update their domPos val
      model.updateDomPos({ id: curEl.id, newPos: cloneDomPos });
      model.updateDomPos({ id: clone.id, newPos: curDomPos });
      // View update data attrs of the swapped elements
      clone.dataset.domPos = curDomPos;
      curEl.dataset.domPos = cloneDomPos;
    }
  }

  return {
    allowDrop,
    drag,
    drop,
  };
})();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-controller.html">controller</a></li><li><a href="module-dragAndDrop.html">dragAndDrop</a></li><li><a href="module-view.html">view</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Mon Oct 31 2022 17:43:52 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
